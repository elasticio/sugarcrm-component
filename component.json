{
    "title": "SugarCRM 7",
    "description": "SugarCRM REST API",
    "docsUrl": "https://github.com/elasticio/sugarcrm-component",
    "credentials": {
        "fields":{
            "baseUrl": {
                "label": "Your SugarCRM domain",
                "required": true,
                "viewClass": "TextFieldView"
            },
            "userName": {
                "label": "Your login",
                "required": true,
                "viewClass": "TextFieldView"
            },
            "password": {
                "label": "Your password",
                "required": true,
                "viewClass": "PasswordFieldView"
            },
            "clientID": {
                "label": "Your OAuth 2.0 Consumer Key",
                "required": true,
                "viewClass": "TextFieldView"
            },
            "clientSecret" : {
                "label": "Your OAuth 2.0 Consumer Secret",
                "required" : true,
                "viewClass": "PasswordFieldView"
            }
        }
    },
    "triggers": {
        "executeQueryTrigger": {
            "title": "Plain SugarCRM query",
            "main": "./lib/triggers/query.js",
            "type": "polling",
            "metadata": {
                "out": {}
            },
            "fields": {
                "query": {
                    "label": "Query",
                    "required": true,
                    "viewClass": "TextAreaWithNoteView",
                    "placeholder": "{\n  \"filter\":[\n    {\"name\":\"Nelson Inc\"}\n  ]\n}",
                    "note": "Complete list of query params you can get <a href='http://support.sugarcrm.com/Documentation/Sugar_Developer/Sugar_Developer_Guide_7.7/Integration/Web_Services/v10/Endpoints/modulefilter_POST/' target='_blank'>here</a>"

                },
                "module": {
                    "label": "Module",
                    "required": true,
                    "viewClass": "TextFieldView"
                }
            }
        },
        "getEntitiesPolling": {
            "main": "./lib/triggers/getEntitiesPolling.js",
            "type": "polling",
            "title": "Fetch new and updated objects (getEntities - Polling)",
            "description": "Get SugarCRM objects which have recently been modified or created",
            "fields" : {
                "module" : {
                    "label": "SugarCRM module to fetch",
                    "required": true,
                    "viewClass": "SelectView",
                    "model": "modules",
                    "prompt": "Select a SugarCRM module"
                },
                "maxNum": {
                    "label": "Number of records to fetch",
                    "viewClass": "TextFieldView",
                    "prompt": "20",
                    "note": "Defaults to 20"
                }
            },
            "metadata": {
                "out": {}
            }
        },
        "getEntitiesWebhook": {
            "main": "./lib/triggers/getEntitiesWebhook.js",
            "type": "webhook",
            "title": "Fetch new and updated objects (getEntities - Webhook)",
            "description": "Get SugarCRM objects which have recently been modified or created",
            "dynamicMetadata": true,
            "fields" : {
                "module" : {
                    "label": "SugarCRM module to fetch",
                    "required": true,
                    "viewClass": "SelectView",
                    "model": "modules",
                    "prompt": "Select a SugarCRM module"
                }
            },
            "metadata": {
                "out": {}
            }
        },
        "getDeletedEntitiesWebhook": {
            "main": "./lib/triggers/getDeletedEntitiesWebhook.js",
            "type": "webhook",
            "title": "Fetch deleted objects (getDeletedEntities - Webhook)",
            "description": "Get SugarCRM objects which have recently been deleted",
            "fields" : {
                "module" : {
                    "label": "SugarCRM module to fetch",
                    "required": true,
                    "viewClass": "SelectView",
                    "model": "modules",
                    "prompt": "Select a SugarCRM module"
                }
            },
            "metadata": {
                "out": {
                    "type": "object",
                    "property": {
                        "id" : {
                            "type": "string",
                            "required": true,
                            "title": "ID of deleted item"
                        }
                    }
                }
            }
        }
    },
    "actions": {
        "lookupEntity" : {
            "title": "Lookup Entity",
            "main": "./lib/actions/lookupEntity.js",
            "description": "Given an id, fetches the corresponding object.",
            "fields" : {
                "module" : {
                    "label": "SugarCRM module to lookup",
                    "required": true,
                    "viewClass": "SelectView",
                    "model": "modules",
                    "prompt": "Select a SugarCRM module"
                }
            },
            "metadata": {
                "in": {
                    "type": "object",
                    "properties": {
                        "id": {
                            "title": "id",
                            "type": "string",
                            "required": true
                        }
                    }
                }
            }
        },
        "deleteEntity" : {
            "title": "Delete Entity",
            "main": "./lib/actions/deleteEntity.js",
            "description": "Given an id, deletes the corresponding object.",
            "fields" : {
                "module" : {
                    "label": "SugarCRM module to delete",
                    "required": true,
                    "viewClass": "SelectView",
                    "model": "modules",
                    "prompt": "Select a SugarCRM module"
                }
            },
            "metadata": {
                "in": {
                    "type": "object",
                    "properties": {
                        "id": {
                            "title": "id",
                            "type": "string",
                            "required": true
                        }
                    }
                }
            }
        },
        "upsertEntity" :{
            "main": "./lib/actions/upsertEntity.js",
            "title": "Upsert Entry",
            "description": "Update an existing entry if it exists or otherwise create it",
            "dynamicMetadata": true,
            "fields" : {
                "module" : {
                    "label": "SugarCRM module to update",
                    "required": true,
                    "viewClass": "SelectView",
                    "model": "modules",
                    "prompt": "Select a SugarCRM module"
                }
            }
        }
    }
}
